<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Resume Analyzer</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.delay-2s { animation-delay: 2s; }
.delay-4s { animation-delay: 4s; }
@keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.animate-fadeIn { animation: fadeIn 0.3s ease-out; }
.animate-slideUp { animation: slideUp 0.5s ease-out; }
@media (max-width: 1024px) {
  #mainContainer { flex-direction: column !important; }
  #formSection { width: 100% !important; background: transparent !important; border: none !important; }
}
</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-black via-gray-900 to-black text-white font-sans overflow-x-hidden">

<!-- Header -->
<header class="fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-xl border-b border-white/10">
  <div class="max-w-7xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
        </div>
        <h1 class="text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">
          SkillMatch AI
        </h1>
      </div>
      
      <!-- Navigation -->
      <nav class="flex items-center space-x-8">
        <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200 text-sm font-medium hover:scale-105 transform">
          About Us
        </a>
        <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200 text-sm font-medium hover:scale-105 transform">
          Support
        </a>
        <button class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 hover:shadow-lg">
          Login
        </button>
      </nav>
    </div>
  </div>
</header>

<!-- Background Animation -->
<div class="fixed inset-0 overflow-hidden pointer-events-none">
<div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-500/10 rounded-full blur-xl animate-pulse"></div>
<div class="absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500/10 rounded-full blur-xl animate-pulse delay-2s"></div>
<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-pink-500/5 rounded-full blur-xl animate-pulse delay-4s"></div>
</div>

<div class="relative z-10 min-h-screen pt-20">
<div id="mainContainer" class="flex items-center justify-center min-h-screen transition-all duration-700">

<!-- Form Section -->
<div id="formSection" class="w-full max-w-4xl px-8 py-12 transition-all duration-700">
<div id="formCard" class="bg-white/5 backdrop-blur-xl rounded-3xl border border-white/20 p-12 hover:scale-[1.02] transition-all duration-300 shadow-2xl">
<div id="header" class="text-center mb-8">
<div id="icon" class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl mb-4 shadow-lg">
<svg id="iconSvg" class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
</div>
<h1 id="title" class="text-4xl font-bold mb-3 bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">Resume Analyzer</h1>
<p id="subtitle" class="text-gray-300 text-lg">Discover how well your resume matches job requirements</p>
</div>

<form id="resumeForm" class="space-y-6 max-w-2xl mx-auto">
<div>
<label id="fileLabel" class="block font-semibold mb-3 text-gray-200 flex items-center text-lg">
<svg class="w-5 h-5 mr-3 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
</svg>Upload Resume (PDF)
</label>
<input id="fileInput" type="file" name="resume" accept=".pdf" required class="w-full bg-white/5 border border-white/20 rounded-xl px-4 py-4 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all duration-300 hover:bg-white/10 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-500 file:text-white hover:file:bg-indigo-600 file:cursor-pointer text-base">
</div>

<div>
<label id="jobLabel" class="block font-semibold mb-3 text-gray-200 flex items-center text-lg">
<svg class="w-5 h-5 mr-3 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>Job Description <span class="text-gray-400 font-normal">(optional)</span>
</label>
<textarea id="jobTextarea" name="jobdesc" rows="6" class="w-full bg-white/5 border border-white/20 rounded-xl px-4 py-4 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 transition-all duration-300 hover:bg-white/10 resize-none text-base" placeholder="Paste the job description here to get more accurate matching results..."></textarea>
</div>

<button id="submitBtn" type="submit" class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-purple-400/50 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl flex items-center justify-center space-x-3 group text-lg">
<svg id="btnIcon" class="w-5 h-5 group-hover:rotate-12 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
</svg>
<span>Analyze Resume</span>
</button>
</form>
</div>
</div>

<!-- Results Section -->
<div id="resultsSection" class="flex-1 p-6 overflow-y-auto transform translate-x-full opacity-0 transition-all duration-700" style="display: none;">
<div id="resultsCard" class="bg-white/5 backdrop-blur-xl rounded-3xl border border-white/20 p-8 max-w-4xl mx-auto shadow-2xl">
<div class="flex items-center mb-6">
<div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-4 shadow-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
</svg>
</div>
<h3 class="text-2xl font-bold">Analysis Results</h3>
</div>
<div id="output" class="space-y-4 text-gray-200"></div>
</div>
</div>

</div>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50" style="display: none;">
<div class="bg-white/5 backdrop-blur-xl rounded-2xl p-8 text-center border border-white/20 shadow-2xl">
<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-400 mx-auto mb-4"></div>
<p class="text-white text-lg font-medium">Analyzing your resume...</p>
<p class="text-gray-300 text-sm mt-2">This may take a few moments</p>
</div>
</div>

<script>
const elements = {
  form: document.getElementById('resumeForm'),
  output: document.getElementById('output'),
  resultsCard: document.getElementById('resultsCard'),
  resultsSection: document.getElementById('resultsSection'),
  formSection: document.getElementById('formSection'),
  mainContainer: document.getElementById('mainContainer'),
  loadingOverlay: document.getElementById('loadingOverlay'),
  formCard: document.getElementById('formCard'),
  header: document.getElementById('header'),
  icon: document.getElementById('icon'),
  iconSvg: document.getElementById('iconSvg'),
  title: document.getElementById('title'),
  subtitle: document.getElementById('subtitle'),
  fileLabel: document.getElementById('fileLabel'),
  jobLabel: document.getElementById('jobLabel'),
  fileInput: document.getElementById('fileInput'),
  jobTextarea: document.getElementById('jobTextarea'),
  submitBtn: document.getElementById('submitBtn'),
  btnIcon: document.getElementById('btnIcon')
};

function shrinkForm() {
  const { formSection, formCard, header, icon, iconSvg, title, subtitle, fileLabel, jobLabel, fileInput, jobTextarea, submitBtn, btnIcon } = elements;
  
  // Container changes
  formSection.className = 'w-96 flex-shrink-0 p-6 bg-black/30 backdrop-blur-sm border-r border-white/10 transition-all duration-700';
  formCard.className = 'bg-white/5 backdrop-blur-xl rounded-3xl border border-white/20 p-6 mb-6 hover:scale-[1.02] transition-all duration-300 shadow-lg';
  
  // Header changes
  header.className = 'text-center mb-6';
  icon.className = 'inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl mb-3 shadow-lg';
  iconSvg.className = 'w-6 h-6';
  title.className = 'text-2xl font-bold mb-2 bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent';
  subtitle.className = 'text-gray-300 text-sm';
  
  // Form changes
  elements.form.className = 'space-y-4';
  fileLabel.className = 'block font-semibold mb-2 text-gray-200 flex items-center text-sm';
  jobLabel.className = 'block font-semibold mb-2 text-gray-200 flex items-center text-sm';
  fileInput.className = 'w-full bg-white/5 border border-white/20 rounded-xl px-3 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all duration-300 hover:bg-white/10 file:mr-3 file:py-1 file:px-3 file:rounded-lg file:border-0 file:text-xs file:font-medium file:bg-indigo-500 file:text-white hover:file:bg-indigo-600 file:cursor-pointer text-sm';
  jobTextarea.className = 'w-full bg-white/5 border border-white/20 rounded-xl px-3 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 transition-all duration-300 hover:bg-white/10 resize-none text-sm';
  jobTextarea.rows = 4;
  submitBtn.className = 'w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold py-3 px-4 rounded-xl hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-purple-400/50 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl flex items-center justify-center space-x-2 group text-sm';
  btnIcon.className = 'w-4 h-4 group-hover:rotate-12 transition-transform duration-300';
  
  // Update label SVGs
  document.querySelectorAll('#fileLabel svg, #jobLabel svg').forEach(svg => svg.className = 'w-4 h-4 mr-2 text-indigo-400');
}

elements.form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(elements.form);

  elements.loadingOverlay.style.display = 'flex';
  elements.loadingOverlay.classList.add('animate-fadeIn');

  try {
    const response = await fetch('http://127.0.0.1:5000/analyze', {
      method: 'POST',
      body: formData
    });
    const result = await response.json();

    elements.loadingOverlay.style.display = 'none';
    
    // Layout transition
    elements.mainContainer.className = 'flex justify-start items-stretch min-h-screen transition-all duration-700';
    shrinkForm();

    // Show results
    elements.resultsSection.style.display = 'block';
    setTimeout(() => elements.resultsSection.className = 'flex-1 p-6 overflow-y-auto transform translate-x-0 opacity-100 transition-all duration-700', 100);

    const score = result.keyword_match_percent;
    const scoreColor = score >= 70 ? 'text-green-400' : score >= 50 ? 'text-yellow-400' : 'text-red-400';
    const missingKeywords = result.missing_keywords?.length > 0 
    ? result.missing_keywords.map(keyword => `<div class="w-1/2 px-2 mb-2"><li class="flex items-center"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full mr-3 flex-shrink-0"></span>${keyword}</li></div>`)
      .join('') 
    : '<li class="flex items-center text-green-300"><span class="w-1.5 h-1.5 bg-green-400 rounded-full mr-3 flex-shrink-0"></span>None â€” excellent match! ðŸŽ‰</li>';
    const missingKeywordsColumns = `<div class="flex flex-wrap -mx-2">${missingKeywords}</div>`;

    const recognizedKeywordsBlock = (result.recognized_keywords || []).map(keyword =>
    `<div class="w-1/2 px-2 mb-2"><li class="flex items-center"><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mr-3 flex-shrink-0"></span>${keyword}</li></div>`
    ).join('') || '<li class="text-gray-400">No recognized keywords</li>';
    const recognizedKeywordsColumns = `<div class="flex flex-wrap -mx-2">${recognizedKeywordsBlock}</div>`;



    elements.output.innerHTML = `
    <div class="grid gap-4">
        <div class="bg-white/5 rounded-xl p-4 border border-white/10 shadow-lg">
        <h4 class="font-semibold text-indigo-300 mb-2 flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>Job Description Used
        </h4>
        <p class="text-gray-300 text-sm leading-relaxed">${result.job_description_used}</p>
        </div>

        <div class="bg-white/5 rounded-xl p-4 border border-white/10 shadow-lg">
        <h4 class="font-semibold text-purple-300 mb-3 flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>SkillMatch Score
        </h4>
        <div class="flex items-center space-x-4">
            <div class="flex-1 bg-gray-800 rounded-full h-3 overflow-hidden">
            <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full transition-all duration-1000" style="width: ${result.keyword_match_percent}%"></div>
            </div>
            <span class="text-2xl font-bold ${scoreColor}">${result.keyword_match_percent}%</span>
        </div>
        <p class="text-sm text-gray-400 mt-2">Matched ${result.keywords_matched} of ${result.total_keywords} recognized keywords.</p>
        </div>

        <div class="bg-white/5 rounded-xl p-4 border border-white/10 shadow-lg">
        <h4 class="font-semibold text-blue-300 mb-2 flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>Recognized Keywords
        </h4>
        ${recognizedKeywordsColumns}
        </div>

        <div class="bg-white/5 rounded-xl p-4 border border-white/10 shadow-lg">
        <h4 class="font-semibold text-orange-300 mb-2 flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"/>
            </svg>Missing Keywords
        </h4>
        ${missingKeywordsColumns}
        </div>
    </div>`;


    setTimeout(() => elements.resultsCard.classList.add('animate-slideUp'), 200);

  } catch (err) {
    elements.loadingOverlay.style.display = 'none';
    elements.mainContainer.className = 'flex justify-start items-stretch min-h-screen transition-all duration-700';
    shrinkForm();

    elements.resultsSection.style.display = 'block';
    setTimeout(() => elements.resultsSection.className = 'flex-1 p-6 overflow-y-auto transform translate-x-0 opacity-100 transition-all duration-700', 100);

    elements.output.innerHTML = `
      <div class="bg-red-500/20 border border-red-500/30 rounded-xl p-4 text-center shadow-lg">
        <svg class="w-8 h-8 text-red-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <p class="text-red-300 font-medium">Error analyzing resume</p>
        <p class="text-red-400 text-sm mt-1">Please check the backend connection and try again</p>
      </div>`;

    setTimeout(() => elements.resultsCard.classList.add('animate-slideUp'), 200);
    console.error("Analysis failed:", err);
  }
});
</script>
</body>
</html>